(function(c){var e=c.Vector3DUtil;var b=c.JMatrix3D;var d=c.JNumber3D;var f=c.RigidBody;var a=function(g,h){this.Super(g);if(h==undefined){this._initNormal=[0,0,-1,0];this._normal=this._initNormal.slice(0);}else{this._initNormal=h.slice(0);this._normal=this._initNormal.slice(0);}this._distance=0;this._type="PLANE";this._movable=false;};c.extend(a,c.RigidBody);a.prototype._initNormal=null;a.prototype._normal=null;a.prototype._distance=null;a.prototype.get_normal=function(){return this._normal;};a.prototype.get_distance=function(){return this._distance;};a.prototype.pointPlaneDistance=function(g){return e.dotProduct(this._normal,g)-this._distance;};a.prototype.segmentIntersect=function(j,g,l){j.fracOut=0;j.posOut=[0,0,0,0];j.normalOut=[0,0,0,0];var i=0;var k;var h=e.dotProduct(this._normal,g.delta);if(Math.abs(h)>d.NUM_TINY){k=-1*(e.dotProduct(this._normal,g.origin)-this._distance)/h;if(k<0||k>1){return false;}else{i=k;j.fracOut=i;j.posOut=g.getPoint(i);j.normalOut=this._normal.slice(0);e.normalize(j.normalOut);return true;}}else{return false;}};a.prototype.updateState=function(){this.Super.prototype.updateState.call(this);this._normal=this._initNormal.slice(0);b.multiplyVector(this._currState._orientation,this._normal);this._distance=e.dotProduct(this._currState.position,this._normal);};c.JPlane=a;})(jigLib);