(function(b){var c=b.Vector3DUtil;var a=b.GLMatrix;var d=function(e){if(e){this.glmatrix=a.create(e);}else{this.glmatrix=a.create([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);}};d.prototype.glmatrix=null;d.prototype.get_determinant=function(){return a.determinant(this.glmatrix);};d.prototype.prepend=function(e){a.multiply(e.glmatrix,this.glmatrix,this.glmatrix);};d.prototype.append=function(e){a.multiply(this.glmatrix,e.glmatrix);};d.prototype.angleAxis=function(s,j){var u,p,v,t,o,f,g,q,k;s=s/(3.14159*2);var n=j[0];var m=j[1];var l=j[2];var i=Math.cos(s);var h=1-i;var e=Math.sin(s);g=n*e;q=m*e;k=l*e;u=n*n;p=m*m;v=l*l;t=n*m;o=m*l;f=l*n;var r=[(h*u)+i,(h*t)-k,(h*f)+q,0,(h*t)+k,(h*p)+i,(h*o)-g,0,(h*f)-q,(h*o)+g,(h*v)+i,0,0,0,0,1];return new d(r);};d.prototype.rotate=function(g,f){var e=this.clone();a.rotate(e.glmatrix,g,f);return e;};d.prototype.translateMatrix=function(e){return new d([1,0,0,e[0],0,1,0,e[1],0,0,1,e[2],0,0,0,1]);};d.prototype.scaleMatrix=function(e){return new d([e[0],0,0,0,0,e[1],0,0,0,0,e[2],0,0,0,0,1]);};d.prototype.appendRotation=function(h,g,e){h=h/(3.14159*2);c.negate(g);if(e){var f=c.negate(e.slice(0));this.appendTranslation(f[0],f[1],f[2]);}a.rotate(this.glmatrix,h,g);if(e){this.appendTranslation(e[0],e[1],e[2]);}};d.prototype.prependRotation=function(g,f,e){if(e){this.prepend(this.translateMatrix(c.negate(e.slice(0))));}this.prepend(this.angleAxis(g,f));if(e){this.prepend(this.translateMatrix(e));}};d.prototype.appendScale=function(e,g,f){a.scale(this.glmatrix,[e,g,f]);};d.prototype.prependScale=function(e,g,f){this.prepend(this.scaleMatrix([e,g,f]));};d.prototype.appendTranslation=function(e,g,f){this.append(this.translateMatrix([e,g,f]));};d.prototype.prependTranslation=function(e,g,f){this.prepend(this.translateMatrix([e,g,f]));};d.prototype.identity=function(){a.identity(this.glmatrix);};d.prototype.transpose=function(){a.transpose(this.glmatrix);};d.prototype.invert=function(){a.inverse(this.glmatrix);};d.prototype.clone=function(){return new d(this.glmatrix);};d.prototype.transformVector=function(e){return a.multiplyVec3(this.glmatrix,e);};b.Matrix3D=d;})(jigLib);