(function(a){var c=a.Vector3DUtil;var b=function(e,f,d,g){this.Super();this.location=e;this.radius=f;this.force=d;if(g){this.parent=g;}};a.extend(b,a.JEffect);b.prototype.location=null;b.prototype.radius=null;b.prototype.force=null;b.prototype.parent=null;b.prototype.Apply=function(){var f=a.PhysicsSystem.getInstance();var d=f.get_bodies();var e=d.length-1;var k,j,g,h;if(this.parent){this.location=this.parent.get_position();}this._affectedBodies=[];do{k=d[e];if(!k.get_movable()||(this.parent&&k==this.parent)){continue;}j=c.distance(k.get_position(),this.location);if(j<this.radius){h=c.subtract(k.get_position(),this.location);g=(1-(j/this.radius))*this.force;c.scaleBy(h,g);c.negate(h);f.activateObject(k);k.applyWorldImpulse(h,this.location);}}while(e--);};a.GravityField=b;})(jigLib);